"use strict";(self.webpackChunkApplicationTP02=self.webpackChunkApplicationTP02||[]).push([[217],{6217:(R,h,a)=>{a.r(h),a.d(h,{CatalogModule:()=>I});var l=a(6895),d=a(5980),f=a(1547),t=a(4650),A=a(2340),F=a(432),T=a(529);let v=(()=>{class n extends F.s{constructor(o){super(),this.http=o,this.env=A.N}getAll(){return this.http.get(this.apiUrl+"fruits")}getById(o){return this.http.get(this.apiUrl+"fruit/"+o)}addFruit(o){return this.http.post(this.apiUrl+"fruit",o)}updateFruit(o){return this.http.put(this.apiUrl+"fruit",o)}deleteFruit(o){return this.http.delete(this.apiUrl+"fruit/"+o)}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(T.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=a(740),g=a(4859),y=a(7392),r=a(3546),Z=a(4850),u=a(4006),x=a(9549),U=a(4144);let O=(()=>{class n{constructor(){this.search=new u.NI(""),this.filterOn="",this.catalog=[],this.filter=new t.vpe,this.filterReset=new t.vpe,this.search.valueChanges.subscribe(o=>{o?this.filter.emit(this.catalog.filter(i=>i[this.filterOn].toLowerCase().includes(o.toLowerCase()))):this.filterReset.emit()})}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-composant-searchbar"]],inputs:{filterOn:"filterOn",catalog:"catalog"},outputs:{filter:"filter",filterReset:"filterReset"},decls:4,vars:1,consts:[["appearance","standard",1,"search-bar"],["matInput","",3,"formControl"]],template:function(o,i){1&o&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2,"Rechercher"),t.qZA(),t._UZ(3,"input",1),t.qZA()),2&o&&(t.xp6(3),t.Q6J("formControl",i.search))},dependencies:[x.KE,x.hX,U.Nt,u.Fj,u.JJ,u.oH]}),n})();const b=function(n){return["/catalog",n]};function L(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",3)(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-content")(5,"button",4),t._UZ(6,"mat-icon",5),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){const p=t.CHM(o).$implicit,C=t.oxw();return t.KtG(C.addFruit(p))}),t._uU(8,"Ajouter"),t.qZA()(),t._UZ(9,"mat-divider"),t.TgZ(10,"mat-card-footer",7),t._uU(11),t.qZA()()()}if(2&n){const o=e.$implicit;t.xp6(3),t.Oqu(o.name),t.xp6(2),t.Q6J("routerLink",t.VKq(3,b,o.id)),t.xp6(6),t.hij(" Prix : ",o.price," \u20ac ")}}let J=(()=>{class n{constructor(o,i){this.catalogService=o,this.store=i,this.catalog=[],this.subscription=this.getCatalog()}ngOnInit(){}getCatalog(){return this.catalogService.getAll().subscribe(o=>{this.catalog=o})}updateCatalog(o){this.catalog=o}ngOnDestroy(){this.subscription.unsubscribe()}addFruit(o){this.store.dispatch(new f.U(o))}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(v),t.Y36(m.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-composant-catalog"]],decls:5,vars:2,consts:[["filterOn","name",3,"catalog","filter","filterReset"],["class","flex-container",4,"ngFor","ngForOf"],[1,"flex-container"],[1,"flex-item"],["mat-raised-button","","color","primary",1,"button",3,"routerLink"],["fontIcon","info",1,"material-symbols-outlined"],["mat-raised-button","","color","primary",1,"button",3,"click"],[2,"padding-left","1rem"]],template:function(o,i){1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-title"),t._uU(2,"Catalogue"),t.qZA(),t.TgZ(3,"app-composant-searchbar",0),t.NdJ("filter",function(p){return i.updateCatalog(p)})("filterReset",function(){return i.getCatalog()}),t.qZA(),t.YNc(4,L,12,5,"div",1),t.qZA()),2&o&&(t.xp6(3),t.Q6J("catalog",i.catalog),t.xp6(1),t.Q6J("ngForOf",i.catalog))},dependencies:[l.sg,g.lW,y.Hw,r.a8,r.dn,r.n5,r.rt,Z.d,d.rH,O],styles:[".mat-card[_ngcontent-%COMP%]{margin-bottom:10pt;margin-top:10pt}.flex-container[_ngcontent-%COMP%]{display:flex}.flex-container[_ngcontent-%COMP%] > .flex-item[_ngcontent-%COMP%]{flex:1 1 auto}.button[_ngcontent-%COMP%]{margin-right:10px}"]}),n})();function P(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",1)(1,"mat-card")(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-content")(5,"mat-chip-list")(6,"mat-chip"),t._uU(7),t.qZA()(),t.TgZ(8,"div",2)(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"button",3),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.ajouterPanier(s.fruit))}),t._uU(12," Ajouter au panier "),t.qZA()()()()()}if(2&n){const o=t.oxw();t.xp6(3),t.Oqu(o.fruit.name),t.xp6(4),t.Oqu(o.fruit.color),t.xp6(3),t.hij("",o.fruit.price," \u20ac")}}let S=(()=>{class n{constructor(o,i,s){this.catalogService=o,this.route=i,this.store=s}ngOnInit(){this.catalogService.getAll().subscribe(o=>{this.fruit=o.find(i=>i.id==this.route.snapshot.params.id)})}ajouterPanier(o){this.store.dispatch(new f.U(o))}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(v),t.Y36(d.gz),t.Y36(m.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-composant-details"]],decls:1,vars:1,consts:[["class","main-content",4,"ngIf"],[1,"main-content"],[1,"content"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,i){1&o&&t.YNc(0,P,13,3,"div",0),2&o&&t.Q6J("ngIf",i.fruit)},dependencies:[l.O5,g.lW,r.a8,r.dn,r.n5]}),n})();var M=a(655),N=a(3044);function Y(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div")(1,"mat-card",1)(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-content")(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"button",2),t.NdJ("click",function(){const p=t.CHM(o).$implicit,C=t.oxw();return t.KtG(C.deleteFromList(p))}),t._uU(8,"Supprimer"),t.qZA()(),t._UZ(9,"mat-divider"),t.TgZ(10,"mat-card-footer",3),t._uU(11),t.qZA()()()}if(2&n){const o=e.$implicit;t.xp6(3),t.Oqu(o.name),t.xp6(3),t.hij("Couleur : ",o.color,""),t.xp6(5),t.hij(" Prix : ",o.price," \u20ac ")}}class c{constructor(e){this.store=e}ngOnInit(){}deleteFromList(e){this.store.dispatch(new f.Y(e))}}c.\u0275fac=function(e){return new(e||c)(t.Y36(m.yh))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-composant-fruit-list"]],decls:5,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"flex-item"],["mat-raised-button","","color","warn",3,"click"],[2,"padding-left","1rem"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-title"),t._uU(2,"Panier"),t.qZA(),t.YNc(3,Y,12,3,"div",0),t.ALo(4,"async"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,1,o.fruitList$)))},dependencies:[l.sg,g.lW,r.a8,r.dn,r.n5,r.rt,Z.d,l.Ov]}),(0,M.gn)([(0,m.Ph)(N.q.getFruitList)],c.prototype,"fruitList$",void 0);const j=[{path:"kart",component:c},{path:"catalog",component:J},{path:":id",component:S}];let I=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,d.Bz.forChild(j)]}),n})()}}]);