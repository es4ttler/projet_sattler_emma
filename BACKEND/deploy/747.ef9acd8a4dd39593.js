"use strict";(self.webpackChunkApplicationTP02=self.webpackChunkApplicationTP02||[]).push([[747],{1747:(B,d,s)=>{s.r(d),s.d(d,{ClientModule:()=>P});var u=s(6895),g=s(5980),e=s(4650),r=s(4006),c=s(7009),h=s(432),f=s(529);let C=(()=>{class t extends h.s{constructor(n){super(),this.http=n}login(n,o){return this.http.post(this.apiUrl+"login",{login:n,password:o})}register(n){return this.http.post(`${this.apiUrl}client/add`,n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(f.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=s(9549),_=s(4144),Z=s(4859),p=s(3546);const y=function(){return["/client","form"]};let v=(()=>{class t{constructor(n,o){this.loginService=o,this.loginForm=new r.cw({login:new r.NI(""),password:new r.NI("")}),this.user=new e.vpe,this.isConnected=!1,this.snackBar=n}onSubmit(){this.loginForm.invalid?this.loginForm.value.login.invalid&&(this.loginForm.value.login.errors?.required&&this.snackBar.open("L'identifiant est requis","",{duration:3e3}),this.loginForm.value.password.errors?.required&&this.snackBar.open("Le mot de passe est requis","",{duration:3e3})):this.login()}login(){console.log("debut submit",this.loginForm.value.login,this.loginForm.value.password),this.loginService.login(this.loginForm.value.login,this.loginForm.value.password).subscribe(n=>{this.updateUser(n)},n=>{this.snackBar.open("Erreur lors de la connexion","",{duration:3e3})}),this.responseLogin()}responseLogin(){this.isConnected=!0,this.snackBar.open("Vous \xeates connect\xe9","",{duration:3e3})}updateUser(n){this.user.emit(n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.ux),e.Y36(C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-composant-login"]],outputs:{user:"user"},decls:20,vars:3,consts:[[1,"center"],[1,"form",3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","formControlName","login"],["matInput","","type","password","formControlName","password","required",""],["mat-flat-button","","color","primary","type","submit"],["mat-flat-button","","color","secondary","type","submit","required","",3,"routerLink"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Connexion"),e.qZA(),e.TgZ(3,"div")(4,"mat-card")(5,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(6,"p")(7,"mat-form-field",2),e._UZ(8,"input",3),e.TgZ(9,"mat-label"),e._uU(10,"Login"),e.qZA()()(),e.TgZ(11,"p")(12,"mat-form-field",2)(13,"mat-label"),e._uU(14,"Mot de passe"),e.qZA(),e._UZ(15,"input",4),e.qZA()(),e.TgZ(16,"button",5),e._uU(17,"Connexion"),e.qZA(),e.TgZ(18,"button",6),e._uU(19,"S'inscrire"),e.qZA()()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",o.loginForm),e.xp6(13),e.Q6J("routerLink",e.DdM(2,y)))},dependencies:[m.KE,m.hX,_.Nt,Z.lW,p.a8,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,g.rH]}),t})();class T{constructor(){this.civility="",this.name="",this.firstname="",this.tel="",this.email="",this.address="",this.city="",this.cp="",this.country="",this.login="",this.password="",this.passwordConfirm=""}isEmpty(){return 0===this.civility.length&&0===this.name.length&&0===this.firstname.length&&0===this.tel.length&&0===this.email.length&&0===this.address.length&&0===this.city.length&&0===this.cp.length&&0===this.country.length&&0===this.login.length&&0===this.password.length&&0===this.passwordConfirm.length}isComplete(){return this.civility.length>0&&this.name.length>0&&this.firstname.length>0&&this.tel.length>0&&this.email.length>0&&this.address.length>0&&this.city.length>0&&this.cp.length>0&&this.country.length>0&&this.login.length>0&&this.password.length>0&&this.passwordConfirm.length>0}}var M=s(5113),A=s(3238);let U=(()=>{class t extends h.s{constructor(n){super(),this.http=n}getAll(){return this.http.get(this.apiUrl+"clients")}getById(n){return this.http.get(this.apiUrl+"client/"+n)}addClient(n){return this.http.post(this.apiUrl+"client",n)}updateClient(n){return this.http.put(this.apiUrl+"client",n)}deleteClient(n){return this.http.delete(this.apiUrl+"client/"+n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(f.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),q=(()=>{class t{transform(n){console.log(n);let o="+33 "+n.substr(1,1)+" ";console.log(n,o);for(var a=2;a<n.length;a+=2)o+=n.substr(a,2)+" ",console.log(n,o,a);return o}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"phoneFormat",type:t,pure:!0}),t})();function x(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Nom : ",n.client.name,"")}}function F(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Pr\xe9nom : ",n.client.firstname,"")}}function w(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Civilit\xe9 : ",n.client.civility,"")}}function J(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Email : ",n.client.email,"")}}function N(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.ALo(2,"phoneFormat"),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("T\xe9l\xe9phone : ",e.lcZ(2,1,n.client.tel),"")}}function I(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Adresse : ",n.client.address,"")}}function Q(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Ville : ",n.client.city,"")}}function S(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Code postal : ",n.client.cp,"")}}function Y(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Pays : ",n.client.country,"")}}function E(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Identifiant : ",n.client.login,"")}}function V(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Mot de passe : ",n.client.password,"")}}function z(t,i){if(1&t&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Confirmation mot de passe : ",n.client.passwordConfirm,"")}}let b=(()=>{class t{constructor(n){this.ts=n,this.client=new T,n.getAll()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(U))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-composant-recap"]],inputs:{client:"client"},decls:27,vars:12,consts:[[4,"ngIf"]],template:function(n,o){1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-title"),e._uU(2,"R\xe9capitulatif du formulaire"),e.qZA(),e.TgZ(3,"mat-card-content"),e.YNc(4,x,2,1,"mat-label",0),e._UZ(5,"br"),e.YNc(6,F,2,1,"mat-label",0),e._UZ(7,"br"),e.YNc(8,w,2,1,"mat-label",0),e._UZ(9,"br"),e.YNc(10,J,2,1,"mat-label",0),e._UZ(11,"br"),e.YNc(12,N,3,3,"mat-label",0),e._UZ(13,"br"),e.YNc(14,I,2,1,"mat-label",0),e._UZ(15,"br"),e.YNc(16,Q,2,1,"mat-label",0),e._UZ(17,"br"),e.YNc(18,S,2,1,"mat-label",0),e._UZ(19,"br"),e.YNc(20,Y,2,1,"mat-label",0),e._UZ(21,"br"),e.YNc(22,E,2,1,"mat-label",0),e._UZ(23,"br"),e.YNc(24,V,2,1,"mat-label",0),e._UZ(25,"br"),e.YNc(26,z,2,1,"mat-label",0),e.qZA()()),2&n&&(e.xp6(4),e.Q6J("ngIf",o.client.name),e.xp6(2),e.Q6J("ngIf",o.client.firstname),e.xp6(2),e.Q6J("ngIf",o.client.civility),e.xp6(2),e.Q6J("ngIf",o.client.email),e.xp6(2),e.Q6J("ngIf",o.client.tel),e.xp6(2),e.Q6J("ngIf",o.client.address),e.xp6(2),e.Q6J("ngIf",o.client.city),e.xp6(2),e.Q6J("ngIf",o.client.cp),e.xp6(2),e.Q6J("ngIf",o.client.country),e.xp6(2),e.Q6J("ngIf",o.client.login),e.xp6(2),e.Q6J("ngIf",o.client.password),e.xp6(2),e.Q6J("ngIf",o.client.passwordConfirm))},dependencies:[u.O5,m.hX,p.a8,p.dn,p.n5,q]}),t})(),L=(()=>{class t{constructor(n,o){this.el=n,this.size="",this.pos="end",this.el.nativeElement.onkeypress=a=>{o.dismiss(),(a.which<48||a.which>57)&&(a.preventDefault(),o.open("Entrez des chiffres uniquement","",{duration:3e3})),this.el.nativeElement.value.length>=this.size&&(a.preventDefault(),o.open("Vous avez atteint le nombre maximal de caract\xe8res","",{duration:3e3}))}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(e.SBq),e.Y36(c.ux))},t.\u0275dir=e.lG2({type:t,selectors:[["","appVerifyNumber",""]],inputs:{size:"size"}}),t})(),R=(()=>{class t{constructor(n,o){this.el=n,this.pos="end",this.el.nativeElement.onkeypress=a=>{a.which<65||a.which>122?(a.preventDefault(),o.open("Entrez uniquement des lettres","",{horizontalPosition:this.pos,duration:3e3,panelClass:["red-snackbar"]})):o.dismiss()}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(e.SBq),e.Y36(c.ux))},t.\u0275dir=e.lG2({type:t,selectors:[["","appVerifyKeypress",""]]}),t})();function j(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",21),e._UZ(1,"app-composant-recap",22),e.TgZ(2,"button",23),e.NdJ("click",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.isValid=!1)}),e._uU(3,"Retour"),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("client",n.client)}}const D=[{path:"login",component:v},{path:"form",component:(()=>{class t{constructor(n,o){this.loginService=o,this.client=new T,this.isValid=!1,this.user=new e.vpe,this.snackBar=n}verifyFormData(){this.client.password!=this.client.passwordConfirm?this.snackBar.open("Le mot de passe et la confirmation de mot de passe ne sont pas identiques","",{duration:3e3}):this.client.isComplete()?(this.onSubmit(),this.isValid=!0):this.snackBar.open("Tous les champs sont requis","",{duration:3e3})}onSubmit(){this.isValid&&(console.log("debut submit register",this.client),this.loginService.register(this.client).subscribe(n=>{this.snackBar.open("Vous \xeates bien inscrit","",{duration:3e3})},n=>{this.snackBar.open("Erreur lors de l'inscription","",{duration:3e3})}))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.ux),e.Y36(C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-composant-form"]],outputs:{user:"user"},decls:89,vars:13,consts:[[3,"ngSubmit"],["appearance","standard"],["name","civility","required","",3,"ngModel","ngModelChange"],["value","Monsieur"],["value","Madame"],["value","Autre"],["appVerifyKeypress","","matInput","","name","name","pattern","[A-Za-z]{0,20}","required","",3,"ngModel","ngModelChange"],["appVerifyKeypress","","matInput","","name","firstname","pattern","[A-Za-z]{0,20}","required","",3,"ngModel","ngModelChange"],["type","email","matInput","","name","email","pattern","[A-Za-z0-9]{0,20}@[A-Za-z0-9]{0,20}.[A-Za-z]{0,3}","required","",3,"ngModel","ngModelChange"],["appVerifyNumber","","size","8","type","tel","matInput","","name","tel","pattern","[0-9]{8}","required","",3,"ngModel","ngModelChange"],["id","E"],["matInput","","name","address","required","",3,"ngModel","ngModelChange"],["appVerifyKeypress","","matInput","","name","city","pattern","[A-Za-z]{0,50}","required","",3,"ngModel","ngModelChange"],["appVerifyNumber","","size","5","matInput","","maxlength","5","name","cp","pattern","[0-9]{5}","required","",3,"ngModel","ngModelChange"],["appVerifyKeypress","","matInput","","name","country","pattern","[A-Za-z]{0,50}","required","",3,"ngModel","ngModelChange"],["appVerifyDirective",""],["matInput","","name","login","pattern","[A-Za-z]{0,50}","required","",3,"ngModel","ngModelChange"],["type","password","matInput","","name","password","required","",3,"ngModel","ngModelChange"],["type","password","matInput","","name","passwordConfirm","onchange","verifyFormData()","required","",3,"ngModel","ngModelChange"],["type","submit","mat-raised-button",""],["class","main-content",4,"ngIf"],[1,"main-content"],[3,"client"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.verifyFormData()}),e.TgZ(1,"div")(2,"mat-card")(3,"mat-card-title"),e._uU(4,"Identit\xe9"),e.qZA(),e.TgZ(5,"table")(6,"tr")(7,"td")(8,"mat-form-field",1)(9,"mat-label"),e._uU(10,"Civilit\xe9"),e.qZA(),e.TgZ(11,"mat-select",2),e.NdJ("ngModelChange",function(l){return o.client.civility=l}),e.TgZ(12,"mat-option",3),e._uU(13,"Monsieur"),e.qZA(),e.TgZ(14,"mat-option",4),e._uU(15,"Madame"),e.qZA(),e.TgZ(16,"mat-option",5),e._uU(17,"Autre"),e.qZA()()()(),e.TgZ(18,"td")(19,"mat-form-field",1)(20,"mat-label"),e._uU(21,"Nom"),e.qZA(),e.TgZ(22,"input",6),e.NdJ("ngModelChange",function(l){return o.client.name=l}),e.qZA()()(),e.TgZ(23,"td")(24,"mat-form-field",1)(25,"mat-label"),e._uU(26,"Pr\xe9nom"),e.qZA(),e.TgZ(27,"input",7),e.NdJ("ngModelChange",function(l){return o.client.firstname=l}),e.qZA()()()(),e.TgZ(28,"tr")(29,"td")(30,"mat-form-field",1)(31,"mat-label"),e._uU(32,"Email"),e.qZA(),e.TgZ(33,"input",8),e.NdJ("ngModelChange",function(l){return o.client.email=l}),e.qZA()()(),e.TgZ(34,"td")(35,"mat-form-field",1)(36,"mat-label"),e._uU(37,"T\xe9l\xe9phone"),e.qZA(),e.TgZ(38,"input",9),e.NdJ("ngModelChange",function(l){return o.client.tel=l}),e.qZA()()()()()()(),e._UZ(39,"div"),e.TgZ(40,"div")(41,"mat-card")(42,"mat-card-title",10),e._uU(43,"Localit\xe9"),e.qZA(),e.TgZ(44,"table")(45,"tr")(46,"td")(47,"mat-form-field",1)(48,"mat-label"),e._uU(49,"Adresse"),e.qZA(),e.TgZ(50,"input",11),e.NdJ("ngModelChange",function(l){return o.client.address=l}),e.qZA()()()(),e.TgZ(51,"tr")(52,"td")(53,"mat-form-field",1)(54,"mat-label"),e._uU(55,"Ville"),e.qZA(),e.TgZ(56,"input",12),e.NdJ("ngModelChange",function(l){return o.client.city=l}),e.qZA()()(),e.TgZ(57,"td")(58,"mat-form-field",1)(59,"mat-label"),e._uU(60,"Code postal"),e.qZA(),e.TgZ(61,"input",13),e.NdJ("ngModelChange",function(l){return o.client.cp=l}),e.qZA()()(),e.TgZ(62,"td")(63,"mat-form-field",1)(64,"mat-label"),e._uU(65,"Pays"),e.qZA(),e.TgZ(66,"input",14),e.NdJ("ngModelChange",function(l){return o.client.country=l}),e.qZA()()()()()()(),e.TgZ(67,"div")(68,"mat-card")(69,"mat-card-title",15),e._uU(70,"Connexion"),e.qZA(),e.TgZ(71,"p")(72,"mat-form-field",1)(73,"mat-label"),e._uU(74,"Login"),e.qZA(),e.TgZ(75,"input",16),e.NdJ("ngModelChange",function(l){return o.client.login=l}),e.qZA()()(),e.TgZ(76,"p")(77,"mat-form-field",1)(78,"mat-label"),e._uU(79,"Mot de passe"),e.qZA(),e.TgZ(80,"input",17),e.NdJ("ngModelChange",function(l){return o.client.password=l}),e.qZA()()(),e.TgZ(81,"p")(82,"mat-form-field",1)(83,"mat-label"),e._uU(84,"Confirmer mot de passe"),e.qZA(),e.TgZ(85,"input",18),e.NdJ("ngModelChange",function(l){return o.client.passwordConfirm=l}),e.qZA()()()()(),e.TgZ(86,"button",19),e._uU(87,"Envoyer"),e.qZA()(),e.YNc(88,j,4,1,"div",20)),2&n&&(e.xp6(11),e.Q6J("ngModel",o.client.civility),e.xp6(11),e.Q6J("ngModel",o.client.name),e.xp6(5),e.Q6J("ngModel",o.client.firstname),e.xp6(6),e.Q6J("ngModel",o.client.email),e.xp6(5),e.Q6J("ngModel",o.client.tel),e.xp6(12),e.Q6J("ngModel",o.client.address),e.xp6(6),e.Q6J("ngModel",o.client.city),e.xp6(5),e.Q6J("ngModel",o.client.cp),e.xp6(5),e.Q6J("ngModel",o.client.country),e.xp6(9),e.Q6J("ngModel",o.client.login),e.xp6(5),e.Q6J("ngModel",o.client.password),e.xp6(5),e.Q6J("ngModel",o.client.passwordConfirm),e.xp6(3),e.Q6J("ngIf",o.isValid))},dependencies:[u.O5,m.KE,m.hX,_.Nt,Z.lW,M.gD,A.ey,p.a8,p.n5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.nD,r.c5,r.On,r.F,b,L,R],styles:["mat-form-field.mat-form-field[_ngcontent-%COMP%]{font-size:16px}.mat-card[_ngcontent-%COMP%]{margin-bottom:10pt;margin-top:10pt}"]}),t})()},{path:"recap",component:b}];let P=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,g.Bz.forChild(D)]}),t})()}}]);